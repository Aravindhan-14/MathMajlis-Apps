<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"><title>Live Classes | MathMajlis</title>
<style>
body{margin:0;font-family:sans-serif;background:#0b0f24;color:#fff}
header{background:#10163a;padding:12px 20px;display:flex;align-items:center;justify-content:space-between}
header a{color:#aab2ff;text-decoration:none;font-weight:700}
.btn{background:#4fd1c5;color:#081923;padding:8px 12px;border:none;border-radius:8px;cursor:pointer;font-weight:800}
.btn:hover{transform:scale(1.05)}
section{padding:20px}
table{width:100%;border-collapse:collapse;margin-top:16px}
th,td{border:1px solid #2a3264;padding:10px;text-align:left}
th{background:#12183f;color:#4fd1c5}
</style>
</head>
<body>
<header>
  <div><a href="index.html">‚Üê Home</a> | <span style="color:#4fd1c5">Live Classes</span></div>
  <button class="btn" onclick="location.href='admin.html'">Admin Panel</button>
</header>

<section>
  <h2>üé• Upcoming Live Classes</h2>
  <table>
    <thead><tr><th>Date & Time</th><th>Topic</th><th>Board</th><th>Teacher</th><th></th></tr></thead>
    <tbody id="liveTable"></tbody>
  </table>
</section>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
import { getFirestore, collection, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey:"AIzaSyDJQ2Or0T74wXzUQVHokg-Vsvpd3aSHadE",
  authDomain:"mathmajlis-app.firebaseapp.com",
  projectId:"mathmajlis-app",
  storageBucket:"mathmajlis-app.firebasestorage.app",
  messagingSenderId:"879528517655",
  appId:"1:879528517655:web:a8a87ee60a541505edbc52",
  measurementId:"G-3P1LTSPFJ2"
};
const app = initializeApp(firebaseConfig);
const db  = getFirestore(app);

const table = document.getElementById('liveTable');
const q = query(collection(db,'liveClasses'), orderBy('when')); // keep as string ordering
onSnapshot(q, (snap)=>{
  table.innerHTML = '';
  if(snap.empty){
    table.innerHTML = '<tr><td colspan="5" style="text-align:center;color:#9aa6ff">No Live Classes</td></tr>';
    return;
  }
  snap.forEach(docu=>{
    const c = docu.data();
    table.innerHTML += `
      <tr>
        <td>${c.when||''}</td>
        <td>${c.topic||''}</td>
        <td>${c.board||''}</td>
        <td>${c.teacher||''}</td>
        <td><button class="btn" onclick="alert('Joining: ${c.topic||''}')">Join</button></td>
      </tr>`;
  });
});
</script>
</body>
</html>
