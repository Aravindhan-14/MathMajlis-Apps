<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"><title>Teacher Dashboard | MathMajlis</title>
<style>
body{margin:0;font-family:sans-serif;background:#0b0f24;color:#fff;text-align:center}
header{background:#10163a;padding:12px}
.btn{background:#4fd1c5;color:#081923;padding:8px 14px;border:none;border-radius:8px;margin:6px;cursor:pointer;font-weight:800}
</style>
</head>
<body>
<header><h2>👩‍🏫 Teacher Dashboard</h2></header>
<p>Welcome, <span id="teacherEmail"></span></p>
<p>
  <button class="btn" onclick="location.href='live.html'">View Live Classes</button>
  <button class="btn" id="logoutBtn">Logout</button>
</p>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js";

const firebaseConfig = {
  apiKey:"AIzaSyDJQ2Or0T74wXzUQVHokg-Vsvpd3aSHadE",
  authDomain:"mathmajlis-app.firebaseapp.com",
  projectId:"mathmajlis-app",
  storageBucket:"mathmajlis-app.firebasestorage.app",
  messagingSenderId:"879528517655",
  appId:"1:879528517655:web:a8a87ee60a541505edbc52",
  measurementId:"G-3P1LTSPFJ2"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

// guard
onAuthStateChanged(auth, (user)=>{
  const role = localStorage.getItem('userRole');
  if(!user || role!=='teacher'){ alert('Unauthorized Access!'); location.href='login.html'; return; }
  document.getElementById('teacherEmail').innerText = user.email;
});

document.getElementById('logoutBtn').onclick = async ()=>{
  await signOut(auth);
  localStorage.clear();
  location.href='login.html';
};
</script>
</body>
</html>
